1613079597 #js-stencil:mozilla.org Attempting to sketch out what rebuilding ScriptPreloader and StartupCaches around experimental `JS::Stencil` opaque type looks like. Lots of good stuff, some conceptual hurdles, no blockers as of yet
1613482728 #js-stencil:mozilla.org Opened [Bug 1693027](https://bugzilla.mozilla.org/show_bug.cgi?id=1693027) caused by weak enum typing. Posted patches, including a change of JS::TranscodeResult into an `enum class`
1613594921 #js-stencil:mozilla.org uuuuuuuuugh; `CompilationOptions` continues to be the worst. Working on making the ScriptPreloader manage stencils, and having to figure out what's the appropriate story for CompileOptions is irksome (the OwnedCompileOptions is pretty ugly too)
1613687222 #js-stencil:mozilla.org Stencil-ified version of ScriptPreloader with and without off-thread decode now prototyped; performance testing ongoing (EOD though, so I'll find out how things go tomorrow)
1613768999 #js-stencil:mozilla.org So doing [stencil ScriptPreloader with no offthread decode is just as fast as our XDR implementation with off thread decode in my current batch of experiments](https://treeherder.mozilla.org/perfherder/compare?originalProject=try&originalRevision=a1bf314382c1b9c81b2f7637aa1d52307bf7e04d&newProject=try&newRevision=4ef532d0c20960a1c2a47fc21ee37e6e2dde6512&framework=1); whereas [adding off thread stencil decode is -slower- by 2%](https://treeherder.mozilla.org/perfherder/compare?originalProject=try&originalRevision=a1bf314382c1b9c81b2f7637aa1d52307bf7e04d&newProject=try&newRevision=fc9afdec70bfdfcfe62bff63713267895907858a&framework=1).