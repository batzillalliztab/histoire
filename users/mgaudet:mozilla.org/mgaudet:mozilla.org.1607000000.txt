1607032129 #spidermonkey:mozilla.org Thanks to Iain, I have async functions in warp passing on try. I am expecting to spend tomorrow doing a bit of a self review, but I hope to have patches up by EOD tomorrow!
1607091884 #spidermonkey:mozilla.org Posted initial patches for warp compiled async functions... and then noticed that a try build I'd expected to be green had some failures. Most patches can still be reviewed, the patch I have most suspicion of has been flipped to plan-changes to pull from review queue.
1607531823 #spidermonkey:mozilla.org All my refactoring around warp async functions seems to have dropped a key property: performance... All of a sudden it appears to be slower to warp compile async functions. It used to be faster... :S
1607635339 #spidermonkey:mozilla.org Well. Don't I feel silly. I've been trying to figure out why [in November I measured a 5% speedup by warp compiling async functions in `async-fs`](https://treeherder.mozilla.org/perfherder/comparesubtest?originalProject=try&newProject=try&newRevision=368b81590020c29db6fce1fe0a82739baabfcdbd&originalSignature=2097581&newSignature=2097581&framework=10&originalRevision=0914334ed4bfb9ca2f7fb2bd746c63c5b963d11e), but with today's stack I can't reproduce the same.\n\nTurns out, I totally forgot about [this other bug, I filed in September](https://bugzilla.mozilla.org/show_bug.cgi?id=1667126) where I figured out that the 'LowerIsBetter' setting for the `async-fs` subtest is incorrect. So what I measured in November was actually a 5% degradation, not a speedup. \n\nSo, next up is performance analysis, determining why Warp is _not_ helping, and if there's room to make it actually help; and otherwise, I'll need to figure out a defensible heuristic.